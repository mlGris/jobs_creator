# jobs_creator

jobs_creator &mdash; это скрипт, который оптимизирует создание джоб, таблиц и маппинга.

## Предварительные требования

* Python 3.12.7

## Запуск

1) Необходимо заполнить глобальную переменную "json" согласно правилам заполнения.
   
2) Запустить скрипт через терминал открытый в директории с файлом "main.py" с помощью команды ```python main.py```.

## Правила заполнения json

Структура jsonа

```
{
    "tables": [ # Список таблиц
        {
            "datasourse_type": "", # Тип источника данных
            "kafka": "", # Ссылка на кафку
            "scheme": "", # Схема, в которой будут созданы таблицы
            "name": "",  # Алиас название таблицы
            "columns": [ # Cписок необходимых полей с ограничениями
                {"alias": "", "column_name": "", "constraints": []}, # Алиас, Название поля в источнике, список ограничений
            ],
            "from": "", # Основная таблица
            "where": """
                where 
                """, # Условия
            "joins": [ # Список джойнов
                {
                    "join_name": "", # Алиас название джойна
                    "join_type": "", # Тип джойна
                    "join_path": "", # Таблица для присоединения
                    "join_on": """
                            """ # Условия присоединения
                },
            ]
        },
    ]       
}
```

1) Оформление названий таблиц, названий полей, джойнов и условий должны соответствовать общепринятым нормам оформления sql запроса для создания джобы.
2) Ограничения "constraints" заполняются в соответсвии с правилами оформления файла yaml (маппинга). Если поле nullable, то ничего не указываем, иначе "notNull".
3) Поле являющееся primary оябзательно должно иметь "alias" : "primary" и ограничение "primary" (не исключая остальные ограничения: тип, nullable и др.).
4) Значение "from" должно содержать только полный путь до таблицы.
5) Значение "where" должно содержать строку where, а после условия.
6) Значение "join_path" указывается между апострофами " ` ", если используется путь до таблицы, если справочник, то апострофы не требуются.
